魚兎エディタ開発記録 (2025年7月10日)

本日の作業では、魚兎エディタのプラグイン管理とシンタックスハイライト機能の改善に焦点を当てました。

1.  **ドキュメントの矛盾解消**:
    *   `plugin_architecture_proposal.md`, `plugin_management.md`, `plugin_spec.md`, `refactoring_plugins_memo.md` の各マークダウンファイルに記述されていた、プラグインの読み込み方法やファイル構造に関する矛盾を解消しました。
    *   現在の実装（`config/plugins.js` を中心とした動的読み込み）に合わせて、ドキュメントの内容を統一しました。

2.  **プラグインの動的読み込み実装**:
    *   新しいプラグインを追加する際に `index.html` を直接編集する必要をなくすため、プラグインの動的読み込みメカニズムを導入しました。
    *   `config/plugins.js` の構造を拡張し、プラグインのパスやクラス名などの情報をオブジェクトとして記述するように変更しました。
    *   `js/main.js` を新規作成し、`config/plugins.js` の設定に基づいてプラグインのCSSとJavaScriptを動的に読み込み、エディタに登録する処理を実装しました。
    *   `index.html` から個別のプラグイン読み込みに関する記述を削除し、`js/main.js` のみを読み込むように簡素化しました。

3.  **シンタックスハイライト機能の改善**:
    *   シンタックスハイライトが正しく機能しない問題（`Prism.languages.javascript` 未定義エラー）を修正するため、`index.js` における `Prism.js` 関連スクリプトの読み込み順序を調整しました。
    *   シンタックスハイライトON時にテキストエリアとプレビューが重なって表示される問題、および縦書きモードでのレイアウト崩れを修正するため、`uoto-editor.css` のレイアウトを調整し、`index.html` の構造も変更しました。
    *   シンタックスハイライトON/OFF時のプレビュー表示とテキストエリアの透明度を適切に制御するため、`syntax-highlight-plugin.js` を修正しました。
    *   シンタックスハイライトOFF時にテキストエリアの文字が見えなくなる問題を修正するため、`uoto-editor.css` と `syntax-highlight-plugin.js` を再修正し、ハイライトOFF時にはテキストが透明にならないように改善しました。
